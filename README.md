Convert/rewrite climate model outputs following CMIP conventions for analysis in ILAMB
======================================================================================

This is a script package to rewrite the ACME model outputs following CMIP conventions by using NCO toolkit. It contains three 
files:

* clm_singlevar_ts.csh
* clm_to_mip 
* explode.bash

where explode.bash is a standalone bash script that is generally used to explode/duplicate a short time range of model outputs 
to the time range in which most observational data in ILAMB is available. clm_singlevar_ts.csh and clm_to_mip are used to
rewrite model outputs to CMIP-compatible files.


### Basic usage:

Just running "clm_singlevar_ts.csh" without any command line arguments will show a very short usage message as follows:

```
> ./clm_singlevar_ts.csh
clm_singlevar_ts.csh --caseid[-c] --centuries[-T] --year_range[-y] --caseidpath[-i] --outputpath[-o] 
                       --experiment[-e] --model[-m] --numcc [--cmip] [--ilamb] [--addfxflds]
```

For example, if you ran a case of ACME water cycle historical experiment from 1850-2050, the case name is
*interp_20160520.A_WCYCL1850.ne30_oEC.edison.alpha6_01* and its results are stored
in the directory */lustre/atlas1/cli106/proj-shared/mxu/ALM_ILAMB/ILAMB/ALM_WCYCL/*. Now you want to rewrote its results
following CMIP conventions into the directory */lustre/atlas1/cli106/proj-shared/mxu/ALM_ILAMB/RESULT/* for analysis in ILAMB. 
Then try to run the command as follows:


- Step 1, output the fixed datasets of "sftlf" and "areacella" using "--addfxflds": 

```
clm_singlevar_ts.csh --caseid interp_20160520.A_WCYCL1850.ne30_oEC.edison.alpha6_01 --centuries 18,19,20 -y 1850-2050 
          -i interp_20160520.A_WCYCL1850.ne30_oEC.edison.alpha6_01 -o /lustre/atlas1/cli106/proj-shared/mxu/ALM_ILAMB/RESULT/ 
	  --experiment history --model ALM_CYCLE --numcc 6 --cmip --ilamb --addfxflds
```

- Step 2, output all other variables:
```
clm_singlevar_ts.csh --caseid interp_20160520.A_WCYCL1850.ne30_oEC.edison.alpha6_01 --centuries 18,19,20 -y 1850-2050 
          -i interp_20160520.A_WCYCL1850.ne30_oEC.edison.alpha6_01 -o /lustre/atlas1/cli106/proj-shared/mxu/ALM_ILAMB/RESULT/ 
	  --experiment history --model ALM_CYCLE --numcc 6 --cmip --ilamb
```

### Options:

* --caseid, -c : the case name
* --centuries, -T : the century range of the simulations, is used by the script to find the files
* --year_range, -y : the year range of the simulations used in the name construction of the output files
* --caseidpath, -i : the directory of the simulations
* --outputpath -o : the directory for the outputs generated by this script
* --experiment, -e : the experiment name following CMIP  conventions used in the name constructions of the output files
* --model, -m : the model name with special features, for example ACME_WCYCL used as the subdirectory name under outputpath to save output files
* --numcc : number of concurrent processes
* --cmip  : rewrite model simulations following CMIP conventions
* --ilmab : rewrite model variables following CMIP conventions for analysis in ILAMB
* --addfxflds : only rewrite the two fixed datasets "sftlf" and "areacella" and exit. Default they won't be written out

